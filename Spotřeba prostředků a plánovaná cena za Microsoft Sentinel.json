{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "8d18a888-2526-48e7-b70b-c5e8ee3f6ed0",
            "version": "KqlParameterItem/1.0",
            "name": "Subscription",
            "type": 6,
            "isRequired": true,
            "value": "/subscriptions/b6a16c17-756e-4a65-8a04-a1791238d9a9",
            "typeSettings": {
              "additionalResourceOptions": [],
              "includeAll": false
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "3a9a1398-c461-45d7-8bc7-bae0b9473d47",
            "version": "KqlParameterItem/1.0",
            "name": "Workspace",
            "type": 5,
            "isRequired": true,
            "query": "where type =~ 'microsoft.operationalinsights/workspaces'| project id",
            "crossComponentResources": [
              "{Subscription}"
            ],
            "value": "/subscriptions/b6a16c17-756e-4a65-8a04-a1791238d9a9/resourceGroups/RG_Sentinel/providers/Microsoft.OperationalInsights/workspaces/wks-sentinel-we",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 1,
            "resourceType": "microsoft.resourcegraph/resources"
          },
          {
            "id": "2f6d3f3a-3fbd-4a57-b051-9c48deb3907e",
            "version": "KqlParameterItem/1.0",
            "name": "TimeRange",
            "type": 4,
            "value": {
              "durationMs": 2592000000
            },
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 300000
                },
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 1800000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 1209600000
                },
                {
                  "durationMs": 2419200000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ]
            },
            "timeContext": {
              "durationMs": 86400000
            }
          },
          {
            "id": "7afebb60-108b-45f6-8951-3b065b17c1de",
            "version": "KqlParameterItem/1.0",
            "name": "LogAnalyticsGBPrice",
            "label": "Log Analytics Cost",
            "type": 1,
            "query": "print 2.522",
            "crossComponentResources": [
              "{Workspace}"
            ],
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          },
          {
            "id": "aafedb48-1bb4-4e30-85fa-a674a776e73b",
            "version": "KqlParameterItem/1.0",
            "name": "AzureSentinelGBPrice",
            "label": "Azure Sentinel Cost",
            "type": 1,
            "query": "print 2.20",
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          },
          {
            "id": "ed8b520c-ba74-424c-871a-75e958a1f6af",
            "version": "KqlParameterItem/1.0",
            "name": "CompleteGBPrice",
            "type": 1,
            "query": "print {LogAnalyticsGBPrice} + {AzureSentinelGBPrice}",
            "crossComponentResources": [
              "{Workspace}"
            ],
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          },
          {
            "id": "1bd77d20-ec4b-4fde-b192-1932cdbf115b",
            "version": "KqlParameterItem/1.0",
            "name": "AvgGiBPerDay",
            "type": 1,
            "query": "union withsource = tt *\r\n| where TimeGenerated > startofday({TimeRange:start}) and TimeGenerated < endofday({TimeRange:end})\r\n// Only look at chargeable Tables\r\n| where _IsBillable == True\r\n| summarize\r\nTotalGBytes =round(sum(_BilledSize/(1024*1024*1024)),2)\r\nby bin(TimeGenerated, 1d)//, Solution=tt\r\n| summarize round(avg(TotalGBytes),2)\r\n",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          },
          {
            "id": "1487afae-3f91-47ae-8e1b-92382d8bb888",
            "version": "KqlParameterItem/1.0",
            "name": "TotalGiB",
            "type": 1,
            "query": "union withsource = tt *\r\n| summarize TotalGBytes = round(sum(_BilledSize/(1024*1024*1024)),2)",
            "crossComponentResources": [
              "{Workspace}"
            ],
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          },
          {
            "id": "9005b6a4-3995-40c1-b2bd-5c31b2f7021b",
            "version": "KqlParameterItem/1.0",
            "name": "ExchangeEURtoCZK",
            "type": 1,
            "query": "print 25.44",
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces",
            "label": "EUR to CZK"
          },
          {
            "id": "bbf02b20-bd06-4d52-984e-d2bba24ab3cd",
            "version": "KqlParameterItem/1.0",
            "name": "AuditTracker",
            "type": 1,
            "query": "print \"TLP:White; WorkbookName:Spotřeba prostředků a plánovaná cena za Microsoft Sentinel\"",
            "isHiddenWhenLocked": true,
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "name": "parameters - 3"
    },
    {
      "type": 1,
      "content": {
        "json": "## Spotřeba prostředků a plánovaná cena za Microsoft Sentinel\n---\n\n"
      },
      "name": "text - 2"
    },
    {
      "type": 1,
      "content": {
        "json": "<br>\r\n<br>\r\n<img width=500 src='https://www.cyber-rangers.com/assets/gfx/logo.svg'/>"
      },
      "customWidth": "40",
      "name": "text - 2"
    },
    {
      "type": 1,
      "content": {
        "json": "<br><br>\r\n#### Tento report zobrazuje statistiku týkající se datové spotřeby v rámci prostředí Microsoft Sentinel. Spotřeba je přepočítána na základě ceníku, který je umístěn na internetových stránkách společnosti Microsoft. Cena služeb se může v závislosti na kurzu měnit, případně může dojít ke změně v případě, že byla cena stanovena se slevou a to například v rámci Enterprise Agreement smlouvy mezi společností zákazníka a společností Microsoft. Vypočtené kapacity jsou stanoveny na základě informací posyktnutých u každého záznamu, který je v rámci služby Log Analytics Workspace zaznamenán. Report poskytuje informační hodnotu pro vlastníka služby Microsoft Sentinel a Azure Monitor (Log Analytics Workspace), který je odpovědným za spotřeby v rámci prostředí Microsoft Azure."
      },
      "customWidth": "40",
      "name": "text - 4"
    },
    {
      "type": 1,
      "content": {
        "json": "---\r\n### Celková spotřeba za vybrané časové období ({TimeRange})",
        "style": "info"
      },
      "name": "text - 5"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "crossComponentResources": [
          "{Workspace}"
        ],
        "parameters": [
          {
            "id": "d9ea1f81-a30c-4324-ab89-5c67d57effd7",
            "version": "KqlParameterItem/1.0",
            "name": "Excludedlogs",
            "label": "Vyloučené logy",
            "type": 2,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "union withsource=TableName1 * | distinct TableName1 | sort by TableName1 asc",
            "crossComponentResources": [
              "{Workspace}"
            ],
            "value": [],
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          },
          {
            "id": "90c35c83-5bb0-476e-83c5-2d29ec0f086f",
            "version": "KqlParameterItem/1.0",
            "name": "ExcludedLogsSelected",
            "type": 1,
            "query": "let tb = datatable(Name:string)[{Excludedlogs:value}];\r\nlet tbcheck = iff(toscalar(tb | count) > 0, \"| where TableName1 !in({Excludedlogs:value})\", \"| where isnotempty(TableName1)\");\r\nprint tbcheck\r\n",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "name": "parameters - 7"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "union withsource=TableName1 *\r\n{ExcludedLogsSelected}\r\n| summarize Entries = count(), \r\n            Size = sumif(_BilledSize, _IsBillable==true), \r\n            last_log = datetime_diff(\"second\",now(), max(TimeGenerated)), \r\n            estimate  = sumif(_BilledSize, _IsBillable==true)  \r\n                by TableName1, _IsBillable\r\n| extend _IsBillable = iff(_IsBillable == True, strcat(\"💰 \",_IsBillable),strcat(\"✅ \",_IsBillable))\r\n| project ['Tabulka'] = TableName1, \r\n          ['Počen záznamů'] = Entries,\r\n          ['Velikost tabulky'] = Size, \r\n          ['% z celkového objemu dat'] = (Size /(1024*1024*1024)) / {TotalGiB}  * 100,\r\n          ['Je účtováno'] = _IsBillable, \r\n          ['Poslední záznam doručen před'] =  last_log , \r\n          ['Očekávaná cena v EUR'] = strcat(round((estimate/(1024*1024*1024)) * {CompleteGBPrice},2),\" EUR\"),\r\n          ['Očekávaná cena v CZK'] = strcat(round((estimate/(1024*1024*1024)) * {CompleteGBPrice} * {ExchangeEURtoCZK},2),\" CZK\")\r\n | order by ['Velikost tabulky'] desc\r\n ",
        "size": 3,
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "Tabulka",
        "exportParameterName": "SelectedTable",
        "exportDefaultValue": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "crossComponentResources": [
          "{Workspace}"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Tabulka",
              "formatter": 0,
              "formatOptions": {
                "customColumnWidthSetting": "43ch"
              }
            },
            {
              "columnMatch": "Počen záznamů",
              "formatter": 4,
              "formatOptions": {
                "palette": "pink"
              }
            },
            {
              "columnMatch": "Velikost tabulky",
              "formatter": 4,
              "formatOptions": {
                "palette": "greenRed",
                "customColumnWidthSetting": "168px"
              },
              "numberFormat": {
                "unit": 2,
                "options": {
                  "style": "decimal"
                }
              }
            },
            {
              "columnMatch": "% z celkového objemu dat",
              "formatter": 4,
              "formatOptions": {
                "palette": "greenRed",
                "customColumnWidthSetting": "228px"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "decimal"
                }
              }
            },
            {
              "columnMatch": "Je účtováno",
              "formatter": 0,
              "formatOptions": {
                "customColumnWidthSetting": "20ch"
              }
            },
            {
              "columnMatch": "Poslední záznam doručen před",
              "formatter": 8,
              "formatOptions": {
                "palette": "greenRed",
                "customColumnWidthSetting": "38.5714ch"
              },
              "numberFormat": {
                "unit": 24,
                "options": {
                  "style": "decimal"
                }
              }
            },
            {
              "columnMatch": "Očekávaná cena v EUR",
              "formatter": 0,
              "formatOptions": {
                "customColumnWidthSetting": "34.5714ch"
              }
            },
            {
              "columnMatch": "Očekávaná cena v CZK",
              "formatter": 0,
              "formatOptions": {
                "customColumnWidthSetting": "33.4286ch"
              }
            },
            {
              "columnMatch": "% z Celkového objemu dat",
              "formatter": 8,
              "formatOptions": {
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "decimal"
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": []
      },
      "name": "query - 6"
    },
    {
      "type": 1,
      "content": {
        "json": "## Pozor máte aktivovaný filtr na tabulku {SelectedTable}"
      },
      "conditionalVisibility": {
        "parameterName": "SelectedTable",
        "comparison": "isNotEqualTo",
        "value": "all"
      },
      "name": "text - 16"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "7f1b5b7f-de2f-449f-8283-c3f1aca17967",
            "version": "KqlParameterItem/1.0",
            "name": "SelectedTableFilter",
            "type": 1,
            "query": "let choice = iff(\"all\" in('{SelectedTable}'), \"| where isnotempty(Tabulka)\",\"| where Tabulka == '{SelectedTable}'\");\r\nprint choice",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          },
          {
            "id": "709ef86c-522b-4c78-87bc-ebd4cd59754a",
            "version": "KqlParameterItem/1.0",
            "name": "THGraph1",
            "type": 1,
            "query": "union withsource=TableName1 *\r\n| summarize Entries = count(), \r\n            Size = sumif(_BilledSize, _IsBillable==true), \r\n            last_log = datetime_diff(\"second\",now(), max(TimeGenerated)), \r\n            estimate  = sumif(_BilledSize, _IsBillable==true)  \r\n                by Tabulka = TableName1, _IsBillable, bin(TimeGenerated, {TimeRange:grain})\r\n{SelectedTableFilter}\r\n| summarize ['Celková velikost tabulek'] = avg(Size)\r\n \r\n ",
            "crossComponentResources": [
              "{Workspace}"
            ],
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 604800000
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          },
          {
            "id": "d67d4470-a320-40dd-9a60-fc5a60f73546",
            "version": "KqlParameterItem/1.0",
            "name": "THGraph2",
            "type": 1,
            "query": "union withsource=TableName1 *\r\n{ExcludedLogsSelected}\r\n| summarize Entries = count(), \r\n            Size = sumif(_BilledSize, _IsBillable==true), \r\n            last_log = datetime_diff(\"second\",now(), max(TimeGenerated)), \r\n            estimate  = sumif(_BilledSize, _IsBillable==true)  \r\n                by Tabulka = TableName1, _IsBillable, bin(TimeGenerated, {TimeRange:grain})\r\n| project Tabulka, \r\n          ['% z celkového objemu dat'] = (Size /(1024*1024*1024)) / {TotalGiB}  * 100,\r\n          TimeGenerated\r\n {SelectedTableFilter}\r\n | summarize ['% z celkového objemu dat'] = avg(['% z celkového objemu dat'])",
            "crossComponentResources": [
              "{Workspace}"
            ],
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          },
          {
            "id": "0c73aebc-0064-4b28-8a06-17fbdb4dfbb2",
            "version": "KqlParameterItem/1.0",
            "name": "THGraph3",
            "type": 1,
            "query": "union withsource=TableName1 *\r\n{ExcludedLogsSelected}\r\n| summarize Entries = count(), \r\n            Size = sumif(_BilledSize, _IsBillable==true), \r\n            last_log = datetime_diff(\"second\",now(), max(TimeGenerated)), \r\n            estimate  = sumif(_BilledSize, _IsBillable==true)  \r\n                by TableName1, _IsBillable, bin(TimeGenerated, {TimeRange:grain})\r\n| project ['Tabulka'] = TableName1, \r\n          ['Očekávaná cena v EUR'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice},2),\r\n          ['Očekávaná cena v CZK'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice} * {ExchangeEURtoCZK},2)\r\n{SelectedTableFilter}\r\n | summarize ['Celková očekávaná cena v CZK'] = avg(['Očekávaná cena v CZK'])\r\n",
            "isHiddenWhenLocked": true,
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "customWidth": "27.5",
      "name": "parameters - 14"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "union withsource=TableName1 *\r\n{ExcludedLogsSelected}\r\n| summarize Entries = count(), \r\n            Size = sumif(_BilledSize, _IsBillable==true), \r\n            last_log = datetime_diff(\"second\",now(), max(TimeGenerated)), \r\n            estimate  = sumif(_BilledSize, _IsBillable==true)  \r\n                by TableName1, _IsBillable\r\n| extend _IsBillable = iff(_IsBillable == True, strcat(\"💰 \",_IsBillable),strcat(\"✅ \",_IsBillable))\r\n| project ['Tabulka'] = TableName1, \r\n          ['Velikost tabulky'] = Size, \r\n          ['% z celkového objemu dat'] = (Size /(1024*1024*1024)) / {TotalGiB}  * 100,\r\n          ['Je účtováno'] = _IsBillable, \r\n          ['Poslední záznam doručen před'] =  last_log , \r\n          ['Očekávaná cena v EUR'] = strcat(round((estimate/(1024*1024*1024)) * {CompleteGBPrice},2),\" EUR\"),\r\n          ['Očekávaná cena v CZK'] = strcat(round((estimate/(1024*1024*1024)) * {CompleteGBPrice} * {ExchangeEURtoCZK},2),\" CZK\")\r\n {SelectedTableFilter}\r\n | summarize ['Celková velikost tabulek'] = sum(['Velikost tabulky'])\r\n | extend Desc = 'Celková velikost tabulek'\r\n \r\n ",
        "size": 4,
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "crossComponentResources": [
          "{Workspace}"
        ],
        "visualization": "tiles",
        "tileSettings": {
          "titleContent": {
            "columnMatch": "Celková velikost tabulek",
            "formatter": 8,
            "formatOptions": {
              "min": 0,
              "max": 0,
              "palette": "orange"
            },
            "numberFormat": {
              "unit": 2,
              "options": {
                "style": "decimal"
              }
            }
          },
          "subtitleContent": {
            "columnMatch": "Desc"
          },
          "showBorder": true,
          "size": "full"
        }
      },
      "customWidth": "15",
      "name": "query - 8"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "union withsource=TableName1 *\r\n{ExcludedLogsSelected}\r\n| summarize Entries = count(), \r\n            Size = sumif(_BilledSize, _IsBillable==true), \r\n            last_log = datetime_diff(\"second\",now(), max(TimeGenerated)), \r\n            estimate  = sumif(_BilledSize, _IsBillable==true)  \r\n                by TableName1, _IsBillable\r\n| extend _IsBillable = iff(_IsBillable == True, strcat(\"💰 \",_IsBillable),strcat(\"✅ \",_IsBillable))\r\n| project ['Tabulka'] = TableName1, \r\n          ['Velikost tabulky'] = Size, \r\n          ['% z celkového objemu dat'] = (Size /(1024*1024*1024)) / {TotalGiB}  * 100,\r\n          ['Je účtováno'] = _IsBillable, \r\n          ['Poslední záznam doručen před'] =  last_log , \r\n          ['Očekávaná cena v EUR'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice},2),\r\n          ['Očekávaná cena v CZK'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice} * {ExchangeEURtoCZK},2)\r\n          {SelectedTableFilter}\r\n | summarize ['Celková očekávaná cena v EUR'] = sum(['Očekávaná cena v EUR'])\r\n | extend Desc = 'Očekávaná cena EUR'\r\n ",
        "size": 4,
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "crossComponentResources": [
          "{Workspace}"
        ],
        "visualization": "tiles",
        "tileSettings": {
          "titleContent": {
            "columnMatch": "Celková očekávaná cena v EUR",
            "formatter": 8,
            "formatOptions": {
              "min": 0,
              "max": 0,
              "palette": "orange"
            }
          },
          "subtitleContent": {
            "columnMatch": "Desc"
          },
          "showBorder": true,
          "size": "full"
        }
      },
      "customWidth": "15",
      "name": "query - 9"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "union withsource=TableName1 *\r\n{ExcludedLogsSelected}\r\n| summarize Entries = count(), \r\n            Size = sumif(_BilledSize, _IsBillable==true), \r\n            last_log = datetime_diff(\"second\",now(), max(TimeGenerated)), \r\n            estimate  = sumif(_BilledSize, _IsBillable==true)  \r\n                by TableName1, _IsBillable\r\n| extend _IsBillable = iff(_IsBillable == True, strcat(\"💰 \",_IsBillable),strcat(\"✅ \",_IsBillable))\r\n| project ['Tabulka'] = TableName1, \r\n          ['Velikost tabulky'] = Size, \r\n          ['% z celkového objemu dat'] = (Size /(1024*1024*1024)) / {TotalGiB}  * 100,\r\n          ['Je účtováno'] = _IsBillable, \r\n          ['Poslední záznam doručen před'] =  last_log , \r\n          ['Očekávaná cena v EUR'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice},2),\r\n          ['Očekávaná cena v CZK'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice} * {ExchangeEURtoCZK},2)\r\n          {SelectedTableFilter}\r\n | summarize ['Celková očekávaná cena v CZK'] = sum(['Očekávaná cena v CZK'])\r\n | extend Desc = 'Očekávaná cena CZK'\r\n ",
        "size": 4,
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "crossComponentResources": [
          "{Workspace}"
        ],
        "visualization": "tiles",
        "tileSettings": {
          "titleContent": {
            "columnMatch": "Celková očekávaná cena v CZK",
            "formatter": 8,
            "formatOptions": {
              "min": 0,
              "max": 0,
              "palette": "orange"
            }
          },
          "subtitleContent": {
            "columnMatch": "Desc"
          },
          "showBorder": true,
          "size": "full"
        }
      },
      "customWidth": "15",
      "name": "query - 10"
    },
    {
      "type": 1,
      "content": {
        "json": ""
      },
      "customWidth": "27.5",
      "name": "text - 11"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "union withsource=TableName1 *\r\n| summarize Entries = count(),\r\n            Size = sumif(_BilledSize, _IsBillable==true),\r\n            last_log = datetime_diff(\"second\",now(), max(TimeGenerated)),\r\n            estimate  = sumif(_BilledSize, _IsBillable==true)\r\n                by TableName1, _IsBillable, bin(TimeGenerated, {TimeRange:grain})\r\n| extend _IsBillable = iff(_IsBillable == True, strcat(\"💰 \",_IsBillable),strcat(\"✅ \",_IsBillable))\r\n| project ['Tabulka'] = TableName1,\r\n          ['Velikost tabulky v bytes'] = Size,\r\n          ['% z celkového objemu dat'] = (Size /(1024*1024*1024)) / {TotalGiB}  * 100,\r\n          ['Je účtováno'] = _IsBillable,\r\n          ['Poslední záznam doručen před xy min.'] =  last_log,\r\n          ['Očekávaná cena v EUR'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice},2),\r\n          ['Očekávaná cena v CZK'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice} * {ExchangeEURtoCZK},2),\r\n          TimeGenerated\r\n | order by ['Velikost tabulky v bytes'] desc\r\n  {SelectedTableFilter}\r\n  | project ['Tabulka'], ['Velikost tabulky v bytes'],TimeGenerated",
        "size": 0,
        "title": "Velikost logu v čase",
        "color": "magenta",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "crossComponentResources": [
          "{Workspace}"
        ],
        "visualization": "areachart",
        "gridSettings": {
          "rowLimit": 10000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "TimeGenerated",
              "sortOrder": 1
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "TimeGenerated",
            "sortOrder": 1
          }
        ],
        "chartSettings": {
          "customThresholdLine": "{THGraph1}",
          "customThresholdLineStyle": 2,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 2,
              "options": {
                "style": "decimal",
                "useGrouping": true
              }
            }
          }
        }
      },
      "conditionalVisibility": {
        "parameterName": "SelectedTable",
        "comparison": "isNotEqualTo",
        "value": "all"
      },
      "customWidth": "50",
      "name": "query - 13"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "union withsource=TableName1 *\r\n| summarize Entries = count(),\r\n            Size = sumif(_BilledSize, _IsBillable==true),\r\n            last_log = datetime_diff(\"second\",now(), max(TimeGenerated)),\r\n            estimate  = sumif(_BilledSize, _IsBillable==true)\r\n                by TableName1, _IsBillable, bin(TimeGenerated, {TimeRange:grain})\r\n| extend _IsBillable = iff(_IsBillable == True, strcat(\"💰 \",_IsBillable),strcat(\"✅ \",_IsBillable))\r\n| project ['Tabulka'] = TableName1,\r\n          ['Velikost tabulky v bytes'] = Size,\r\n          ['% z celkového objemu dat'] = (Size /(1024*1024*1024)) / {TotalGiB}  * 100,\r\n          ['Je účtováno'] = _IsBillable,\r\n          ['Poslední záznam doručen před xy min.'] =  last_log,\r\n          ['Očekávaná cena v EUR'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice},2),\r\n          ['Očekávaná cena v CZK'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice} * {ExchangeEURtoCZK},2),\r\n          TimeGenerated\r\n | order by ['Velikost tabulky v bytes'] desc\r\n  {SelectedTableFilter}\r\n  | project ['Tabulka'], ['% z celkového objemu dat'],TimeGenerated",
        "size": 0,
        "title": "Počet % z celkového objemu dat, která byla doručena ve zvoleném časovém okně",
        "color": "yellow",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "crossComponentResources": [
          "{Workspace}"
        ],
        "visualization": "areachart",
        "chartSettings": {
          "customThresholdLine": "{THGraph2}",
          "customThresholdLineStyle": 2
        }
      },
      "conditionalVisibility": {
        "parameterName": "SelectedTable",
        "comparison": "isNotEqualTo",
        "value": "all"
      },
      "customWidth": "50",
      "name": "query - 14"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "union withsource=TableName1 *\r\n| summarize Entries = count(),\r\n            Size = sumif(_BilledSize, _IsBillable==true),\r\n            last_log = datetime_diff(\"second\",now(), max(TimeGenerated)),\r\n            estimate  = sumif(_BilledSize, _IsBillable==true)\r\n                by TableName1, _IsBillable, bin(TimeGenerated, {TimeRange:grain})\r\n| extend _IsBillable = iff(_IsBillable == True, strcat(\"💰 \",_IsBillable),strcat(\"✅ \",_IsBillable))\r\n| project ['Tabulka'] = TableName1,\r\n          ['Velikost tabulky v bytes'] = Size,\r\n          ['% z celkového objemu dat'] = (Size /(1024*1024*1024)) / {TotalGiB}  * 100,\r\n          ['Je účtováno'] = _IsBillable,\r\n          ['Poslední záznam doručen před xy min.'] =  last_log,\r\n          ['Očekávaná cena v EUR'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice},2),\r\n          ['Očekávaná cena v CZK'] = round((estimate/(1024*1024*1024)) * {CompleteGBPrice} * {ExchangeEURtoCZK},2),\r\n          TimeGenerated\r\n | order by ['Velikost tabulky v bytes'] desc\r\n  {SelectedTableFilter}\r\n  | project ['Tabulka'], ['Očekávaná cena v CZK'],TimeGenerated",
        "size": 0,
        "title": "Cena v CZK v čase",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "crossComponentResources": [
          "{Workspace}"
        ],
        "visualization": "areachart",
        "chartSettings": {
          "customThresholdLine": "{THGraph3}",
          "customThresholdLineStyle": 2
        }
      },
      "conditionalVisibility": {
        "parameterName": "SelectedTable",
        "comparison": "isNotEqualTo",
        "value": "all"
      },
      "name": "query - 15"
    },
    {
      "type": 1,
      "content": {
        "json": "Copyright © 2023 Cyber Rangers s.r.o. All rights reserved.\r\n\r\nThe contents of this specific Azure Workbook, identified as \"Spotřeba prostředků a plánovaná cena za Microsoft Sentinel\", are the property of Cyber Rangers s.r.o. and are protected under the copyright laws of the Czech Republic and other countries. Unauthorized use, reproduction, modification, distribution, or transmission of any part of this specific Azure Workbook without the prior written consent of Cyber Rangers s.r.o. is strictly prohibited.\r\n\r\nAzure is a registered trademark of Microsoft Corporation. Cyber Rangers s.r.o. is not affiliated with or endorsed by Microsoft Corporation.\r\n\r\nFor more information about Cyber Rangers s.r.o. and its products and services, please visit our website at https://www.cyber-rangers.com."
      },
      "name": "text - 16"
    }
  ],
  "fallbackResourceIds": [
    "/subscriptions/b6a16c17-756e-4a65-8a04-a1791238d9a9/resourcegroups/rg_sentinel/providers/microsoft.operationalinsights/workspaces/wks-sentinel-we"
  ],
  "fromTemplateId": "sentinel-UserWorkbook",
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}